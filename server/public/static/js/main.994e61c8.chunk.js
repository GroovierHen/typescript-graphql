(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{215:function(e,t,a){e.exports=a(387)},386:function(e,t,a){},387:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),s=a.n(l),o=a(25),i=a(24),c=a(58),m=a(389),u=a(28),p=a.n(u),d=a(45),E=a(30),f=a(20),g=a(14),v=a.n(g),b=a(18),y=a(396);function h(){var e=Object(f.a)(["\n  mutation {\n    logout\n  }\n"]);return h=function(){return e},e}function w(){var e=Object(f.a)(["\n  query {\n    me {\n      email\n      stripeId\n    }\n  }\n"]);return w=function(){return e},e}var j=v()(w()),x=v()(h()),O=function(){var e=Object(c.h)().pathname,t=Object(b.b)(j).data,a=Object(b.a)(x),n=Object(E.a)(a,1)[0];console.log(t);var l=function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("logout"!==t.key){e.next=4;break}return e.next=3,n();case 3:window.location.pathname="/";case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(m.a.Header,{style:{position:"fixed",zIndex:1,width:"100%"}},(null===t||void 0===t?void 0:t.me)?r.a.createElement(y.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:[e],onClick:l},r.a.createElement(y.a.Item,{key:"/"},r.a.createElement(i.b,{to:"/"},"Home")),r.a.createElement(y.a.Item,{key:"/create-post"},r.a.createElement(i.b,{to:"/create-post"},"Create Post")),!(null===t||void 0===t?void 0:t.me.stripeId)&&r.a.createElement(y.a.Item,null,r.a.createElement("a",{href:"https://dashboard.stripe.com/oauth/authorize?response_type=code&client_id=ca_H8xYIQV6w2K0vj5jSfDPmJ6sbHYAa6I7&scope=read_write",className:"stripe-connect",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("span",null,"Connect with Stripe"))),r.a.createElement(y.a.Item,{key:"logout"},"Logout")):r.a.createElement(y.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:[e]},r.a.createElement(y.a.Item,{key:"/"},r.a.createElement(i.b,{to:"/"},"Home")),r.a.createElement(y.a.Item,{key:"/login"},r.a.createElement(i.b,{to:"/login"},"Login")),r.a.createElement(y.a.Item,{key:"/register"},r.a.createElement(i.b,{to:"/register"},"Register"))))},I=a(394),T=a(390),k=a(392),P=a(397),$=a(154);function N(){var e=Object(f.a)(["\n  mutation(\n    $firstname: String!\n    $lastname: String!\n    $email: String!\n    $password: String!\n  ) {\n    register(\n      data: {\n        firstName: $firstname\n        lastName: $lastname\n        email: $email\n        password: $password\n      }\n    ) {\n      id\n      firstName\n      lastName\n      email\n      name\n    }\n  }\n"]);return N=function(){return e},e}var S={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}}},B={wrapperCol:{xs:{span:24,offset:0},sm:{offset:5}}},C=v()(N()),F=function(){var e=I.a.useForm(),t=Object(E.a)(e,1)[0],a=Object(b.a)(C),n=Object(E.a)(a,2),l=n[0],s=n[1].error,o=Object(c.g)().push,i=function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n,r,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.firstname,n=t.lastname,r=t.email,s=t.password,e.prev=1,e.next=4,l({variables:{firstname:a,lastname:n,email:r,password:s}});case 4:o("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(I.a,Object.assign({form:t,name:"register",onFinish:i,scrollToFirstError:!0},S),r.a.createElement(T.a,{direction:"vertical",size:"large",style:{width:"100%"}},r.a.createElement("div",{className:"title"},r.a.createElement(k.a.Title,null,"Register")),r.a.createElement(I.a.Item,{name:"firstname",label:"First Name",rules:[{required:!0,message:"Please input your First Name!"}],hasFeedback:!0},r.a.createElement(P.a,null)),r.a.createElement(I.a.Item,{name:"lastname",label:"Last Name",rules:[{required:!0,message:"Please input your Last Name!"}],hasFeedback:!0},r.a.createElement(P.a,null)),r.a.createElement(I.a.Item,{name:"email",label:"E-mail",validateStatus:s&&"error",help:s&&"Email already exists",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]},r.a.createElement(P.a,null)),r.a.createElement(I.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"}],hasFeedback:!0},r.a.createElement(P.a.Password,null)),r.a.createElement(I.a.Item,B,r.a.createElement($.a,{type:"primary",htmlType:"submit"},"Register"))))};function U(){var e=Object(f.a)(["\n  mutation($email: String!, $password: String!) {\n    login(data: { email: $email, password: $password }) {\n      id\n      firstName\n      lastName\n      email\n      name\n    }\n  }\n"]);return U=function(){return e},e}var D={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}}},q={wrapperCol:{xs:{span:24,offset:0},sm:{offset:5}}},V=v()(U()),z=function(){var e=I.a.useForm(),t=Object(E.a)(e,1)[0],a=Object(b.a)(V),n=Object(E.a)(a,2),l=n[0],s=n[1].error,o=function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,e.prev=1,e.next=4,l({variables:{email:a,password:n}});case 4:window.location.pathname="/",e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(I.a,Object.assign({form:t,name:"login",onFinish:o,scrollToFirstError:!0},D),r.a.createElement(T.a,{direction:"vertical",size:"large",style:{width:"100%"}},r.a.createElement("div",{className:"title"},r.a.createElement(k.a.Title,null,"Login")),r.a.createElement(I.a.Item,{name:"email",label:"E-mail",validateStatus:s&&"error",help:s&&s.message.split(":")[1],rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]},r.a.createElement(P.a,null)),r.a.createElement(I.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"}],hasFeedback:!0},r.a.createElement(P.a.Password,null)),r.a.createElement(I.a.Item,q,r.a.createElement($.a,{type:"primary",htmlType:"submit"},"Login"))))};function R(){var e=Object(f.a)(["\n  mutation($token: String!) {\n    confirmUser(token: $token)\n  }\n"]);return R=function(){return e},e}var L=v()(R()),H=function(){var e=Object(b.a)(L),t=Object(E.a)(e,1)[0],a=Object(c.i)().token,l=Object(n.useCallback)(Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t({variables:{token:a}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),[t,a]);return Object(n.useEffect)((function(){l()}),[l]),r.a.createElement("div",{className:"title"},r.a.createElement(k.a.Title,null,"Confirm"))},_=a(213);function J(){var e=Object(f.a)(["\n  query {\n    me {\n      email\n    }\n  }\n"]);return J=function(){return e},e}var K=v()(J()),A=function(e){var t=e.component,a=Object(_.a)(e,["component"]),n=Object(b.b)(K),l=n.loading,s=n.error,o=n.data;return r.a.createElement(c.b,Object.assign({},a,{render:function(e){if(!o||l||s)return null;if(!o.me)return r.a.createElement(c.a,{to:"/login"});var a=t;return r.a.createElement(a,e)}}))},M=a(122),W=a.n(M),Y=a(81),Q=a(42),G=a(391),X=a(395);function Z(){var e=Object(f.a)(["\n  query {\n    getPosts {\n      id\n      videoUrl\n      title\n      postType\n      description\n      user {\n        name\n      }\n    }\n  }\n"]);return Z=function(){return e},e}var ee=v()(Z()),te=function(){var e=Object(b.b)(ee),t=e.loading,a=e.error,n=e.data;return a?r.a.createElement("div",{className:"title"},r.a.createElement(k.a.Title,null,"Something went wrong")):r.a.createElement(Y.a,null,r.a.createElement(Q.a,{xs:{span:24,offset:0},lg:{span:12,offset:6}},r.a.createElement("div",{className:"title"},r.a.createElement(k.a.Title,null,"Feed"))),n?n.getPosts.map((function(e){return"Video"===e.postType&&e.videoUrl?r.a.createElement(Q.a,{key:e.id,xs:{span:24,offset:0},lg:{span:12,offset:6},style:{marginBottom:"1em"}},r.a.createElement(G.a,{title:e.title,extra:r.a.createElement(i.b,{to:"/post/".concat(e.id)},"More")},r.a.createElement(W.a,{url:e.videoUrl,controls:!0,width:"100%"}))):r.a.createElement(Q.a,{key:e.id,xs:{span:24,offset:0},lg:{span:12,offset:6},style:{marginBottom:"1em"}},r.a.createElement(G.a,{title:e.title,extra:r.a.createElement(i.b,{to:"/post/".concat(e.id)},"More")},r.a.createElement("p",null,e.description)))})):r.a.createElement(Q.a,{xs:{span:24,offset:0},lg:{span:12,offset:6}},r.a.createElement(X.a,{active:!0,loading:t})))},ae=a(398);function ne(){var e=Object(f.a)(["\n  query($postId: String!) {\n    getPostByID(postId: $postId) {\n      id\n      title\n      description\n      postType\n      videoUrl\n      user {\n        firstName\n      }\n    }\n  }\n"]);return ne=function(){return e},e}var re=v()(ne()),le=function(){var e=Object(c.i)().postId,t=Object(b.b)(re,{variables:{postId:e}}),a=t.loading,n=t.error,l=t.data;return n?r.a.createElement("div",{className:"title"},r.a.createElement(k.a.Title,null,"Something went wrong")):r.a.createElement(Q.a,{xs:{span:24,offset:0},lg:{span:12,offset:6},style:{marginTop:"7em"}},"Video"===(null===l||void 0===l?void 0:l.getPostByID.postType)&&l.getPostByID.videoUrl?r.a.createElement(G.a,{title:l.getPostByID.title,loading:a},r.a.createElement(T.a,{direction:"vertical",size:"large",style:{width:"100%"}},r.a.createElement("p",null,l.getPostByID.description),r.a.createElement(W.a,{url:l.getPostByID.videoUrl,controls:!0,width:"100%"}),r.a.createElement("div",null,r.a.createElement("span",{style:{marginRight:8}},"Post By:"),r.a.createElement(ae.a,null,l.getPostByID.user.firstName),r.a.createElement("span",{style:{marginRight:8}},"Post Type:"),r.a.createElement(ae.a,null,l.getPostByID.postType)))):r.a.createElement(G.a,{title:null===l||void 0===l?void 0:l.getPostByID.title,loading:a},r.a.createElement(T.a,{direction:"vertical",size:"large",style:{width:"100%"}},r.a.createElement("p",null,null===l||void 0===l?void 0:l.getPostByID.description),r.a.createElement("div",null),r.a.createElement("div",null,r.a.createElement("span",{style:{marginRight:8}},"Post By:"),r.a.createElement(ae.a,null,null===l||void 0===l?void 0:l.getPostByID.user.firstName),r.a.createElement("span",{style:{marginRight:8}},"Post Type:"),r.a.createElement(ae.a,null,null===l||void 0===l?void 0:l.getPostByID.postType)))))},se=a(393);function oe(){var e=Object(f.a)(["\n  mutation(\n    $title: String!\n    $description: String!\n    $postType: String!\n    $videoUrl: String\n  ) {\n    createPost(\n      data: {\n        title: $title\n        description: $description\n        postType: $postType\n        videoUrl: $videoUrl\n      }\n    ) {\n      id\n      title\n      description\n      postType\n      videoUrl\n      user {\n        name\n      }\n    }\n  }\n"]);return oe=function(){return e},e}var ie={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}}},ce={wrapperCol:{xs:{span:24,offset:0},sm:{offset:5}}},me=v()(oe()),ue=function(){var e=Object(n.useState)("Text"),t=Object(E.a)(e,2),a=t[0],l=t[1],s=I.a.useForm(),o=Object(E.a)(s,1)[0],i=Object(b.a)(me),m=Object(E.a)(i,1)[0],u=Object(c.g)().push,f=function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n,r,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.title,n=t.description,r=t.postType,l=t.videoUrl,e.prev=1,e.next=4,m({variables:{title:a,description:n,postType:r,videoUrl:l}});case 4:u("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(I.a,Object.assign({form:o,name:"create_post",onFinish:f,scrollToFirstError:!0},ie,{initialValues:{postType:"Text"},onValuesChange:function(e){e.postType&&l(e.postType)}}),r.a.createElement(T.a,{direction:"vertical",size:"large",style:{width:"100%"}},r.a.createElement("div",{className:"title"},r.a.createElement(k.a.Title,null,"Create a Post")),r.a.createElement(I.a.Item,{name:"title",label:"Title",rules:[{required:!0,message:"Title should not be empty"}],hasFeedback:!0},r.a.createElement(P.a,null)),r.a.createElement(I.a.Item,{name:"description",label:"Description",rules:[{required:!0,message:"Description should not be empty"}],hasFeedback:!0},r.a.createElement(P.a.TextArea,null)),r.a.createElement(I.a.Item,{name:"postType",label:"Post type"},r.a.createElement(se.a,null,r.a.createElement(se.a.Option,{value:"Text"},"Text"),r.a.createElement(se.a.Option,{value:"Video"},"Video"))),"Video"===a&&r.a.createElement(I.a.Item,{name:"videoUrl",label:"Video URL",rules:[{required:!0,message:"Video URL should not be empty"}]},r.a.createElement(P.a,null)),r.a.createElement(I.a.Item,ce,r.a.createElement($.a,{type:"primary",htmlType:"submit"},"Create"))))},pe=function(){return r.a.createElement(i.a,null,r.a.createElement(m.a,null,r.a.createElement(O,null),r.a.createElement(m.a.Content,{className:"site-layout",style:{padding:50,marginTop:64}},r.a.createElement("div",{className:"site-layout-background",style:{padding:24,minHeight:380}},r.a.createElement(c.d,null,r.a.createElement(c.b,{exact:!0,path:"/",component:te}),r.a.createElement(c.b,{exact:!0,path:"/register",component:F}),r.a.createElement(c.b,{exact:!0,path:"/login",component:z}),r.a.createElement(c.b,{exact:!0,path:"/confirm/:token",component:H}),r.a.createElement(c.b,{exact:!0,path:"/post/:postId",component:le}),r.a.createElement(A,{exact:!0,path:"/create-post",component:ue}))))))},de=function(){return r.a.createElement(pe,null)},Ee=new(a(211).a)({uri:"http://localhost:4000/graphql",credentials:"include"});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(386);s.a.render(r.a.createElement(o.a,{client:Ee},r.a.createElement(de,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[215,1,2]]]);
//# sourceMappingURL=main.994e61c8.chunk.js.map